\NeedsTeXFormat{LaTeX2e}
\ProvidesPackage{beamerthemestrong}[2013/11/08 A strong theme for the Beamer class]

\newsavebox{\mybox}

% Lengths and Sizes
\setbeamersize{
  text margin left=8mm,
  text margin right=8mm}
\setlength{\leftmargini}{1em}
\setlength{\leftmarginii}{1em}
\setlength{\leftmarginiii}{1em}
\AtBeginDocument{%
    \setlength{\abovedisplayskip}{0pt}
    \setlength{\belowdisplayskip}{0pt}
    \setlength{\abovedisplayshortskip}{0pt}
    \setlength{\belowdisplayshortskip}{0pt}
}

% Basic colors chosen by using http://hue360.herokuapp.com/
\definecolor{mybg}{HTML}{FFFFFF}
\definecolor{mygray}{HTML}{C5C5C5}
\definecolor{mybrightblack}{HTML}{333333}
\definecolor{myblack}{HTML}{000000}
\definecolor{myred}{HTML}{C7243A}
\definecolor{myyellow}{HTML}{F6CA06}
\definecolor{mygreen}{HTML}{A4C520}
\definecolor{myblue}{HTML}{3261AB}
\definecolor{mypurple}{HTML}{744199}

\setbeamercolor{normal text}{fg=myblack}
\setbeamertemplate{background canvas}[default]
\setbeamercolor{background canvas}{bg=mybg}
\setbeamertemplate{navigation symbols}{}
\setbeamertemplate{footline}{%
  \leavevmode%
  \hbox{%
    \begin{beamercolorbox}[wd=\paperwidth,sep=2mm,right]{}%
      \usebeamercolor[fg]{page number in head/foot}\usebeamerfont{page number in head/foot}%
      \insertframenumber%
      \hspace*{1mm}%
    \end{beamercolorbox}%
  }%
  \vskip0pt%
}
\setbeamercolor{page number in head/foot}{fg=myblack}
\setbeamerfont{page number in head/foot}{size=\footnotesize}
\setbeamerfont{title}{size=\LARGE,series=\bfseries}
\setbeamercolor{title}{fg=mybrightblack}
\setbeamertemplate{title page}{%
  \vskip0pt plus 2fill%
  {%
    \linespread{0.8}\usebeamerfont{title}\usebeamercolor[fg]{title}%
    \inserttitle\par%
    \ifx\insertsubtitle\empty%
    \else%
      \linespread{0.8}\usebeamerfont{subtitle}\usebeamercolor[fg]{subtitle}%
      \vskip0.5em%
      \insertsubtitle\par%
    \fi%
  }%
  \vskip1.75em%
  {%
    \linespread{0.8}\selectfont%
    \insertauthor\par%
    \ifx\insertinstitute\empty%
    \else%
      \vskip0.5em%
      \linespread{0.8}\selectfont%
      {\footnotesize\insertinstitute\par}%
    \fi%
  }%
  \vskip1.75em%
  \insertdate\par%
  \vskip0pt plus 1fill%
}
\setbeamertemplate{frametitle}{\vspace{1mm}\insertframetitle\par}
\setbeamerfont{frametitle}{size=\LARGE,series=\bfseries}
\setbeamercolor{frametitle}{fg=myblue}
\setbeamercolor{item}{fg=myblue}
\setbeamertemplate{itemize item}{\tiny\raise1.75pt\hbox{$\blacksquare$}}
\setbeamertemplate{itemize subitem}{\scriptsize\raise1.5pt\hbox{$\blacktriangleright$}}
\setbeamertemplate{itemize/enumerate body begin}{\bfseries\color{mybrightblack}\renewcommand{\theenumii}{\theenumi\alph{enumii}}}
\setbeamertemplate{itemize/enumerate subbody begin}{\mdseries}
\setbeamerfont{enumerate item}{series=\bfseries}
\setbeamerfont{enumerate subitem}{series=\bfseries}
\setbeamerfont{description item}{series=\bfseries}
\setbeamertemplate{enumerate subitem}{\usebeamercolor[fg]{enumerate item}\usebeamerfont{enumerate item}\alph{enumii}.}
\setbeamerfont{alerted text}{series=\bfseries}
\setbeamercolor{alerted text}{fg=myred}
% block
\setbeamerfont{block title}{series=\bfseries}
\setbeamercolor{block title}{fg=mybrightblack}
\setbeamercolor{block body}{fg=myblack,bg=mygray!50}
\setbeamertemplate{block begin}{%
  \begin{center}%
    \begin{beamercolorbox}[wd=\linewidth,sep=2mm]{block body}%
      {\usebeamercolor[fg]{block title}\usebeamerfont{block title}\insertblocktitle}%
      \ifthenelse{\equal{\insertblocktitle}{}}{}{\par}%
      \begin{minipage}{\linewidth - 2mm - 2mm}%
}
\setbeamertemplate{block end}{%
      \end{minipage}%
    \end{beamercolorbox}%
  \end{center}%
}
% alert block
\setbeamerfont{block title alerted}{series=\bfseries}
\setbeamercolor{block title alerted}{fg=mybrightblack}
\setbeamercolor{block body alerted}{fg=myblack,bg=myyellow!70}
\setbeamertemplate{block alerted begin}{%
  \begin{center}%
    \begin{beamercolorbox}[wd=\linewidth,sep=2mm]{block body alerted}%
      {\usebeamercolor[fg]{block title alerted}\usebeamerfont{block title alerted}\insertblocktitle}%
      \ifthenelse{\equal{\insertblocktitle}{}}{}{\par}%
      \begin{minipage}{\linewidth - 2mm - 2mm}%
}
\setbeamertemplate{block alerted end}{%
      \end{minipage}%
    \end{beamercolorbox}%
  \end{center}%
}
% example block
\setbeamerfont{block title example}{series=\bfseries}
\setbeamercolor{block title example}{fg=mybrightblack}
\setbeamercolor{block body example}{fg=myblack,bg=myblue!25}
\setbeamertemplate{block example begin}{%
  \begin{center}%
    \begin{beamercolorbox}[wd=\linewidth,sep=2mm]{block body example}%
      {\usebeamercolor[fg]{block title example}\usebeamerfont{block title example}\insertblocktitle}%
      \ifthenelse{\equal{\insertblocktitle}{}}{}{\par}%
      \begin{minipage}{\linewidth - 2mm - 2mm}%
}
\setbeamertemplate{block example end}{%
      \end{minipage}%
    \end{beamercolorbox}%
  \end{center}%
}


% Font
% We use fontspec's 'main font' (serif font) for math and use the 'sans font'
% for normal text.
\usefonttheme[onlymath]{serif}
\RequirePackage{fontspec}
\setmainfont{TeX Gyre Pagella}  % serif font, used only for math
%\setsansfont[Scale=MatchLowercase,
%             Numbers={Proportional,Lining},
%             BoldFont=Lato Black,
%             ItalicFont=Lato Light Italic,
%             BoldItalicFont=Lato Black Italic]
%            {Lato Light}
\setsansfont[Scale=MatchLowercase,
             Numbers={Proportional,Lining},
             BoldFont=Raleway ExtraBold,
             ItalicFont=Lato Light Italic,
             BoldItalicFont=Lato Black Italic]
            {Raleway Light}
\setmonofont[Scale=MatchLowercase]{Inconsolata}

%\RequirePackage{luatexja-otf}
%\RequirePackage{luatexja-fontspec}
%\setmainjfont[BoldFont=M+ 1c medium]{M+ 1c light}
%\setsansjfont[BoldFont=M+ 1c medium]{M+ 1c light}


% Highlighting
\RequirePackage{minted}
\usemintedstyle{pastie}
\newminted[html]{html}{bgcolor=black!5,fontsize=\footnotesize,gobble=4,linenos=false,numbersep=6pt}
